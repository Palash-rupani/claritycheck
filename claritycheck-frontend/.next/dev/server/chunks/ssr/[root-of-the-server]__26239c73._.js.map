{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/src/components/Header.tsx"],"sourcesContent":["'use client'\n\nimport { FC } from 'react'\nimport Link from 'next/link'\nimport { Button } from '@/components/ui/button'\nimport { CheckCircle2 } from 'lucide-react'\n\nconst Header: FC = () => {\n  return (\n    <header className=\"sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex h-16 items-center justify-between\">\n          {/* Brand */}\n          <Link href=\"/\" className=\"flex items-center gap-2\">\n            <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-primary\">\n              <CheckCircle2 className=\"h-5 w-5 text-primary-foreground\" />\n            </div>\n            <span className=\"hidden font-bold text-foreground sm:inline\">\n              ClarityCheck\n            </span>\n          </Link>\n\n          {/* Navigation */}\n          <nav className=\"hidden flex-1 items-center justify-center gap-8 md:flex\">\n            <Link href=\"/\" className=\"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\">\n              Home\n            </Link>\n            <Link href=\"/dashboard\" className=\"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\">\n              Dashboard\n            </Link>\n            <Link href=\"/about\" className=\"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\">\n              About\n            </Link>\n          </nav>\n\n          {/* CTA Button */}\n          <Button asChild className=\"bg-primary hover:bg-primary/90\">\n            <Link href=\"/products/new\">Add Product</Link>\n          </Button>\n        </div>\n      </div>\n    </header>\n  )\n}\n\nexport default Header\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AALA;;;;;AAOA,MAAM,SAAa;IACjB,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACvB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,qOAAY;oCAAC,WAAU;;;;;;;;;;;0CAE1B,8OAAC;gCAAK,WAAU;0CAA6C;;;;;;;;;;;;kCAM/D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,uKAAI;gCAAC,MAAK;gCAAI,WAAU;0CAAoF;;;;;;0CAG7G,8OAAC,uKAAI;gCAAC,MAAK;gCAAa,WAAU;0CAAoF;;;;;;0CAGtH,8OAAC,uKAAI;gCAAC,MAAK;gCAAS,WAAU;0CAAoF;;;;;;;;;;;;kCAMpH,8OAAC,qIAAM;wBAAC,OAAO;wBAAC,WAAU;kCACxB,cAAA,8OAAC,uKAAI;4BAAC,MAAK;sCAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvC;uCAEe"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/src/components/Footer.tsx"],"sourcesContent":["'use client'\n\nimport { FC } from 'react'\nimport Link from 'next/link'\n\nconst Footer: FC = () => {\n  return (\n    <footer className=\"border-t border-border bg-muted/30 py-12\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"grid grid-cols-1 gap-8 md:grid-cols-4\">\n          {/* Brand Column */}\n          <div className=\"col-span-1\">\n            <h3 className=\"font-bold text-foreground\">ClarityCheck</h3>\n            <p className=\"mt-2 text-sm text-muted-foreground\">\n              Building trust through product transparency and AI-powered insights.\n            </p>\n          </div>\n\n          {/* Values Column */}\n          <div>\n            <h4 className=\"font-semibold text-foreground\">Mission</h4>\n            <ul className=\"mt-4 space-y-2\">\n              <li className=\"text-sm text-muted-foreground\">Health</li>\n              <li className=\"text-sm text-muted-foreground\">Wisdom</li>\n              <li className=\"text-sm text-muted-foreground\">Virtue</li>\n            </ul>\n          </div>\n\n          {/* Links Column */}\n          <div>\n            <h4 className=\"font-semibold text-foreground\">Product</h4>\n            <ul className=\"mt-4 space-y-2\">\n              <li><Link href=\"/about\" className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\">About</Link></li>\n              <li><Link href=\"/dashboard\" className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\">Dashboard</Link></li>\n            </ul>\n          </div>\n\n          {/* Legal Column */}\n          <div>\n            <h4 className=\"font-semibold text-foreground\">Legal</h4>\n            <ul className=\"mt-4 space-y-2\">\n              <li><a href=\"#\" className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\">Privacy</a></li>\n              <li><a href=\"#\" className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\">Terms</a></li>\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"mt-8 border-t border-border pt-8 text-center text-sm text-muted-foreground\">\n          <p>&copy; 2025 ClarityCheck. All rights reserved.</p>\n        </div>\n      </div>\n    </footer>\n  )\n}\n\nexport default Footer\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKA,MAAM,SAAa;IACjB,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAA4B;;;;;;8CAC1C,8OAAC;oCAAE,WAAU;8CAAqC;;;;;;;;;;;;sCAMpD,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAG,WAAU;sDAAgC;;;;;;sDAC9C,8OAAC;4CAAG,WAAU;sDAAgC;;;;;;sDAC9C,8OAAC;4CAAG,WAAU;sDAAgC;;;;;;;;;;;;;;;;;;sCAKlD,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;sDAAG,cAAA,8OAAC,uKAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAwE;;;;;;;;;;;sDAC1G,8OAAC;sDAAG,cAAA,8OAAC,uKAAI;gDAAC,MAAK;gDAAa,WAAU;0DAAwE;;;;;;;;;;;;;;;;;;;;;;;sCAKlH,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;sDAAG,cAAA,8OAAC;gDAAE,MAAK;gDAAI,WAAU;0DAAwE;;;;;;;;;;;sDAClG,8OAAC;sDAAG,cAAA,8OAAC;gDAAE,MAAK;gDAAI,WAAU;0DAAwE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAKxG,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;kCAAE;;;;;;;;;;;;;;;;;;;;;;AAKb;uCAEe"}},
    {"offset": {"line": 444, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/src/components/ReportPreview.tsx"],"sourcesContent":["'use client'\n\nimport { FC } from 'react'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { Download, FileText, AlertTriangle } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { AnalysisResult } from '@/src/lib/reportEngine'\n\ninterface ReportPreviewProps {\n  productName: string\n  productClaim: string\n  category: string\n  answeredQuestions: number\n  totalQuestions: number\n  analysis?: AnalysisResult\n  onDownload: () => void\n  loading?: boolean\n}\n\nconst ReportPreview: FC<ReportPreviewProps> = ({\n  productName,\n  productClaim,\n  category,\n  answeredQuestions,\n  totalQuestions,\n  analysis,\n  onDownload,\n  loading = false,\n}) => {\n  const completionPercentage = totalQuestions\n    ? Math.round((answeredQuestions / totalQuestions) * 100)\n    : 0\n\n  return (\n    <Card className=\"overflow-hidden shadow border rounded-2xl pdf-safe bg-white\">\n      {/* HEADER */}\n      <CardHeader className=\"bg-gray-100 border-b\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <CardTitle className=\"text-xl font-bold\">{productName}</CardTitle>\n            <CardDescription className=\"mt-1 text-base text-gray-700\">\n              {productClaim}\n            </CardDescription>\n          </div>\n          <FileText className=\"h-8 w-8 text-black\" />\n        </div>\n      </CardHeader>\n\n      {/* CONTENT */}\n      <CardContent className=\"pt-6 space-y-8\">\n\n        {/* META INFO */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"rounded-xl bg-gray-200 p-4\">\n            <p className=\"text-xs text-gray-600 mb-1\">Category</p>\n            <p className=\"font-semibold\">{category}</p>\n          </div>\n\n          <div className=\"rounded-xl bg-gray-200 p-4\">\n            <p className=\"text-xs text-gray-600 mb-1\">Completion</p>\n            <p className=\"font-semibold\">{completionPercentage}%</p>\n          </div>\n        </div>\n\n        {/* SCORES BLOCK */}\n        {analysis && (\n          <div className=\"rounded-xl border p-5 bg-gray-100 space-y-3\">\n            <h3 className=\"font-semibold text-base mb-2\">\n              Transparency Scores\n            </h3>\n\n            <ScoreItem label=\"Overall Score\" value={analysis.overall} />\n            <ScoreItem\n              label=\"Ingredient Safety\"\n              value={analysis.ingredientSafety}\n            />\n            <ScoreItem\n              label=\"Claim Credibility\"\n              value={analysis.claimCredibility}\n            />\n            <ScoreItem label=\"Traceability\" value={analysis.traceability} />\n            <ScoreItem label=\"Completeness\" value={analysis.completeness} />\n          </div>\n        )}\n\n        {/* HORIZONTAL SCORE BARS */}\n        {analysis && (\n          <div className=\"rounded-xl border p-5 bg-white space-y-4\">\n            <h3 className=\"font-semibold text-base\">Score Breakdown</h3>\n\n            <ScoreBar label=\"Overall Score\" value={analysis.overall} />\n            <ScoreBar\n              label=\"Ingredient Safety\"\n              value={analysis.ingredientSafety}\n            />\n            <ScoreBar\n              label=\"Claim Credibility\"\n              value={analysis.claimCredibility}\n            />\n            <ScoreBar label=\"Traceability\" value={analysis.traceability} />\n            <ScoreBar label=\"Completeness\" value={analysis.completeness} />\n          </div>\n        )}\n\n        {/* RADAR CHART */}\n        {analysis && (\n          <div className=\"rounded-xl border p-5 bg-white\">\n            <h3 className=\"font-semibold text-base mb-3\">Radar Overview</h3>\n            <RadarChart scores={analysis} />\n          </div>\n        )}\n\n        {/* RISK FLAGS */}\n        {analysis?.riskFlags?.length ? (\n          <div className=\"rounded-xl border border-gray-400 bg-gray-200 p-5 space-y-2\">\n            <div className=\"flex items-center gap-2\">\n              <AlertTriangle className=\"h-5 w-5 text-black\" />\n              <h3 className=\"font-semibold text-black\">Risk Flags</h3>\n            </div>\n            <ul className=\"list-disc pl-6 text-sm text-black\">\n              {analysis.riskFlags.map((risk) => (\n                <li key={risk}>{risk}</li>\n              ))}\n            </ul>\n          </div>\n        ) : null}\n\n        {/* SUMMARY */}\n        {analysis && (\n          <div className=\"rounded-xl border p-5 bg-gray-100\">\n            <h3 className=\"font-semibold\">Summary</h3>\n            <p className=\"text-sm text-gray-700 mt-1 leading-relaxed\">\n              {analysis.summary}\n            </p>\n          </div>\n        )}\n\n        {/* DOWNLOAD */}\n        <div className=\"border-t pt-6\">\n          <Button\n            onClick={onDownload}\n            disabled={loading}\n            className=\"w-full gap-2\"\n          >\n            <Download className=\"h-4 w-4\" />\n            {loading ? \"Generating PDF…\" : \"Download PDF\"}\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default ReportPreview\n\n/* --------------------------------------------------------------------\n   REUSABLE SCORE TEXT ROW\n-------------------------------------------------------------------- */\nconst ScoreItem = ({ label, value }: { label: string; value: number }) => (\n  <div className=\"flex justify-between text-sm\">\n    <span className=\"text-gray-600\">{label}</span>\n    <span className=\"font-semibold\">{value}/100</span>\n  </div>\n)\n\n/* --------------------------------------------------------------------\n   HORIZONTAL SCORE BAR GRAPH\n-------------------------------------------------------------------- */\nconst ScoreBar = ({ label, value }: { label: string; value: number }) => {\n  return (\n    <div className=\"mb-2\">\n      <div className=\"flex justify-between mb-1 text-sm font-medium\">\n        <span>{label}</span>\n        <span>{value}/100</span>\n      </div>\n      <div className=\"w-full h-3 bg-gray-300 rounded-full\">\n        <div\n          className=\"h-3 bg-black rounded-full transition-all\"\n          style={{ width: `${value}%` }}\n        />\n      </div>\n    </div>\n  )\n}\n\n/* --------------------------------------------------------------------\n   RADAR CHART (SVG - PDF SAFE)\n-------------------------------------------------------------------- */\nconst RadarChart = ({ scores }: { scores: AnalysisResult }) => {\n  const max = 100\n\n  const values = [\n    scores.overall / max,\n    scores.ingredientSafety / max,\n    scores.claimCredibility / max,\n    scores.traceability / max,\n    scores.completeness / max,\n  ]\n\n  const angle = (i: number) => (Math.PI * 2 * i) / values.length\n\n  const points = values\n    .map((v, i) => {\n      const a = angle(i)\n      const x = 110 + 80 * v * Math.cos(a)\n      const y = 110 + 80 * v * Math.sin(a)\n      return `${x},${y}`\n    })\n    .join(\" \")\n\n  return (\n    <svg width=\"220\" height=\"220\" className=\"mx-auto\">\n      {/* Outer circle */}\n      <circle cx=\"110\" cy=\"110\" r=\"80\" fill=\"none\" stroke=\"#ddd\" />\n\n      {/* Filled polygon */}\n      <polygon points={points} fill=\"rgba(0,0,0,0.4)\" stroke=\"black\" />\n\n      {/* Labels */}\n      <text x=\"110\" y=\"15\" textAnchor=\"middle\" className=\"text-xs\">\n        Overall\n      </text>\n      <text x=\"205\" y=\"120\" textAnchor=\"middle\" className=\"text-xs\">\n        Ingredient\n      </text>\n      <text x=\"110\" y=\"215\" textAnchor=\"middle\" className=\"text-xs\">\n        Claim\n      </text>\n      <text x=\"15\" y=\"120\" textAnchor=\"middle\" className=\"text-xs\">\n        Traceability\n      </text>\n      <text x=\"110\" y=\"110\" textAnchor=\"middle\" className=\"text-xs\">\n        Complete\n      </text>\n    </svg>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1123, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/src/lib/api.ts"],"sourcesContent":["const BASE_URL = \"http://localhost:8000\";\n\nexport async function createProduct(payload: {\n  name: string;\n  category: string;\n  description: string;\n  claim: string;\n}) {\n  const res = await fetch(`${BASE_URL}/products`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n  if (!res.ok) throw new Error(\"Failed to create product\");\n  return res.json();\n}\n\nexport async function getProduct(productId: string) {\n  const res = await fetch(`${BASE_URL}/products/${productId}`);\n  if (!res.ok) throw new Error(\"Failed to load product\");\n  return res.json();\n}\n\nexport async function fetchLatestFollowups(productId: string) {\n  const res = await fetch(`${BASE_URL}/products/${productId}/followups`);\n  if (!res.ok) throw new Error(\"Failed to fetch followups\");\n  return res.json();\n}\n\nexport async function saveProfile(productId: string, profile: any) {\n  const res = await fetch(`${BASE_URL}/products/${productId}/profile`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ profile }),\n  });\n  if (!res.ok) throw new Error(\"Failed to save profile\");\n  return res.json();\n}\n\nexport async function saveAnswers(\n  productId: string,\n  answers: Record<string, string>\n) {\n  const res = await fetch(`${BASE_URL}/products/${productId}/answers`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ answers }),\n  });\n  if (!res.ok) throw new Error(\"Failed to save answers\");\n  return res.json();\n}\n\n// Optional: AI options (if used)\nexport async function generateOptions(productId: string) {\n  const res = await fetch(`${BASE_URL}/products/${productId}/options`, {\n    method: \"POST\",\n  });\n  if (!res.ok) throw new Error(\"Failed to generate AI options\");\n  return res.json();\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,MAAM,WAAW;AAEV,eAAe,cAAc,OAKnC;IACC,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,SAAS,CAAC,EAAE;QAC9C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,WAAW,SAAiB;IAChD,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,UAAU,EAAE,WAAW;IAC3D,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,qBAAqB,SAAiB;IAC1D,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,UAAU,EAAE,UAAU,UAAU,CAAC;IACrE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,YAAY,SAAiB,EAAE,OAAY;IAC/D,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,UAAU,EAAE,UAAU,QAAQ,CAAC,EAAE;QACnE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAQ;IACjC;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,YACpB,SAAiB,EACjB,OAA+B;IAE/B,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,UAAU,EAAE,UAAU,QAAQ,CAAC,EAAE;QACnE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAQ;IACjC;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,gBAAgB,SAAiB;IACrD,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,UAAU,EAAE,UAAU,QAAQ,CAAC,EAAE;QACnE,QAAQ;IACV;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 1196, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/src/lib/reportEngine.ts"],"sourcesContent":["// src/lib/reportEngine.ts\r\n\r\nexport interface AnalysisResult {\r\n  overall: number;\r\n  ingredientSafety: number;\r\n  claimCredibility: number;\r\n  traceability: number;\r\n  completeness: number;\r\n  riskFlags: string[];\r\n  summary: string;\r\n}\r\n\r\n/**\r\n * CATEGORY TAGS\r\n */\r\nconst CATEGORY_HEALTH = [\"skincare\", \"cosmetics\", \"supplement\"];\r\nconst CATEGORY_FOOD = [\"food\", \"snacks\", \"beverage\"];\r\nconst CATEGORY_ELECTRONICS = [\"electronics\", \"device\", \"appliance\"];\r\n\r\n/**\r\n * HIGH-QUALITY, SMART PRODUCT TRANSPARENCY ENGINE\r\n */\r\nexport function analyzeProduct(product: any, followups: any[]): AnalysisResult {\r\n  const category = product?.category?.toLowerCase() || \"\";\r\n  const claim = product?.claim || \"\";\r\n\r\n  // ------------------------------------------\r\n  // FIX: Supabase profile nesting\r\n  // product.profile.profile = { ingredients: \"...\", sourcing: \"...\", ... }\r\n  // ------------------------------------------\r\n  const outerProfile = product?.profile || {};\r\n  const profile = outerProfile.profile || {};\r\n\r\n  const ingredients = profile.ingredients?.trim() || \"\";\r\n  const sourcing = profile.sourcing?.trim() || \"\";\r\n  const certs = profile.certifications?.trim() || \"\";\r\n  const details = profile.additionalDetails?.trim() || \"\";\r\n\r\n  // ------------------------------------------\r\n  // 1) INGREDIENT SAFETY\r\n  // ------------------------------------------\r\n  let ingredientSafety = 40;\r\n\r\n  if (!ingredients) {\r\n    ingredientSafety = 10;\r\n  } else {\r\n    const ing = ingredients.toLowerCase();\r\n\r\n    const harmful = [\r\n      \"paraben\",\r\n      \"sls\",\r\n      \"sles\",\r\n      \"phthalate\",\r\n      \"formaldehyde\",\r\n      \"petroleum\",\r\n      \"mineral oil\",\r\n      \"bleach\",\r\n      \"synthetic fragrance\",\r\n    ];\r\n\r\n    const safe = [\r\n      \"organic\",\r\n      \"natural\",\r\n      \"plant\",\r\n      \"herbal\",\r\n      \"cold pressed\",\r\n      \"vitamin\",\r\n      \"non-gmo\",\r\n      \"preservative-free\",\r\n      \"fragrance-free\",\r\n    ];\r\n\r\n    harmful.forEach((h) => {\r\n      if (ing.includes(h)) ingredientSafety -= 15;\r\n    });\r\n\r\n    safe.forEach((s) => {\r\n      // FIXED LINE ↓↓↓↓↓↓\r\n      if (ing.includes(s)) ingredientSafety += 10;\r\n    });\r\n\r\n    // Extra weight for skincare\r\n    if (CATEGORY_HEALTH.includes(category)) {\r\n      ingredientSafety = Math.min(ingredientSafety + 10, 95);\r\n    }\r\n  }\r\n\r\n  ingredientSafety = Math.max(5, Math.min(ingredientSafety, 95));\r\n\r\n  // ------------------------------------------\r\n  // 2) CLAIM CREDIBILITY\r\n  // ------------------------------------------\r\n  let claimCredibility = 50;\r\n\r\n  if (!claim) {\r\n    claimCredibility = 35;\r\n  } else {\r\n    const sensitiveClaims = [\r\n      \"organic\",\r\n      \"vegan\",\r\n      \"cruelty-free\",\r\n      \"lab-tested\",\r\n      \"non-toxic\",\r\n      \"clean\",\r\n    ];\r\n\r\n    const containsSensitive = sensitiveClaims.some((w) =>\r\n      claim.toLowerCase().includes(w)\r\n    );\r\n\r\n    if (containsSensitive) claimCredibility += 15;\r\n    if (certs) claimCredibility += 20;\r\n    if (claim.toLowerCase().includes(\"100%\")) claimCredibility -= 10;\r\n\r\n    claimCredibility = Math.min(claimCredibility, 95);\r\n  }\r\n\r\n  // ------------------------------------------\r\n  // 3) TRACEABILITY\r\n  // ------------------------------------------\r\n  let traceability = 40;\r\n\r\n  if (sourcing) traceability += 30;\r\n  if (certs) traceability += 20;\r\n  if (details) traceability += 10;\r\n\r\n  // Electronics require more documentation\r\n  if (CATEGORY_ELECTRONICS.includes(category)) {\r\n    traceability += 10;\r\n  }\r\n\r\n  traceability = Math.min(traceability, 95);\r\n\r\n  // ------------------------------------------\r\n  // 4) COMPLETENESS\r\n  // ------------------------------------------\r\n  const total = followups.length;\r\n  const answered = followups.filter((q) => q.answer?.trim()).length;\r\n  const completeness = total === 0 ? 30 : Math.round((answered / total) * 100);\r\n\r\n  // ------------------------------------------\r\n  // 5) RISK FLAGS\r\n  // ------------------------------------------\r\n  const riskFlags: string[] = [];\r\n\r\n  if (!ingredients)\r\n    riskFlags.push(\"Ingredients missing — cannot assess ingredient safety.\");\r\n  if (!sourcing)\r\n    riskFlags.push(\"Sourcing details missing — traceability impacted.\");\r\n  if (CATEGORY_HEALTH.includes(category) && !certs)\r\n    riskFlags.push(\r\n      \"No safety certifications provided for a skincare/cosmetic product.\"\r\n    );\r\n  if (claim && completeness < 50)\r\n    riskFlags.push(\"Product claims not fully validated by supplied information.\");\r\n\r\n  if (riskFlags.length === 0) {\r\n    riskFlags.push(\"No major transparency risks detected.\");\r\n  }\r\n\r\n  // ------------------------------------------\r\n  // 6) OVERALL SCORE\r\n  // ------------------------------------------\r\n  const overall = Math.round(\r\n    ingredientSafety * 0.3 +\r\n      claimCredibility * 0.2 +\r\n      traceability * 0.25 +\r\n      completeness * 0.25\r\n  );\r\n\r\n  // ------------------------------------------\r\n  // 7) SUMMARY TEXT\r\n  // ------------------------------------------\r\n  let summary = \"\";\r\n\r\n  if (overall >= 85) {\r\n    summary =\r\n      \"Excellent transparency. Strong ingredient safety, reliable sourcing, and credible claims.\";\r\n  } else if (overall >= 70) {\r\n    summary =\r\n      \"Good transparency with minor missing information. Improving documentation will strengthen trust.\";\r\n  } else if (overall >= 50) {\r\n    summary =\r\n      \"Moderate transparency. Missing details reduce clarity. Provide full ingredient and sourcing details.\";\r\n  } else {\r\n    summary =\r\n      \"Low transparency and potential risks detected. Provide complete ingredient list, sourcing details, certifications, and documentation.\";\r\n  }\r\n\r\n  return {\r\n    overall,\r\n    ingredientSafety,\r\n    claimCredibility,\r\n    traceability,\r\n    completeness,\r\n    riskFlags,\r\n    summary,\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAY1B;;CAEC,GACD,MAAM,kBAAkB;IAAC;IAAY;IAAa;CAAa;AAC/D,MAAM,gBAAgB;IAAC;IAAQ;IAAU;CAAW;AACpD,MAAM,uBAAuB;IAAC;IAAe;IAAU;CAAY;AAK5D,SAAS,eAAe,OAAY,EAAE,SAAgB;IAC3D,MAAM,WAAW,SAAS,UAAU,iBAAiB;IACrD,MAAM,QAAQ,SAAS,SAAS;IAEhC,6CAA6C;IAC7C,gCAAgC;IAChC,yEAAyE;IACzE,6CAA6C;IAC7C,MAAM,eAAe,SAAS,WAAW,CAAC;IAC1C,MAAM,UAAU,aAAa,OAAO,IAAI,CAAC;IAEzC,MAAM,cAAc,QAAQ,WAAW,EAAE,UAAU;IACnD,MAAM,WAAW,QAAQ,QAAQ,EAAE,UAAU;IAC7C,MAAM,QAAQ,QAAQ,cAAc,EAAE,UAAU;IAChD,MAAM,UAAU,QAAQ,iBAAiB,EAAE,UAAU;IAErD,6CAA6C;IAC7C,uBAAuB;IACvB,6CAA6C;IAC7C,IAAI,mBAAmB;IAEvB,IAAI,CAAC,aAAa;QAChB,mBAAmB;IACrB,OAAO;QACL,MAAM,MAAM,YAAY,WAAW;QAEnC,MAAM,UAAU;YACd;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAED,MAAM,OAAO;YACX;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAED,QAAQ,OAAO,CAAC,CAAC;YACf,IAAI,IAAI,QAAQ,CAAC,IAAI,oBAAoB;QAC3C;QAEA,KAAK,OAAO,CAAC,CAAC;YACZ,oBAAoB;YACpB,IAAI,IAAI,QAAQ,CAAC,IAAI,oBAAoB;QAC3C;QAEA,4BAA4B;QAC5B,IAAI,gBAAgB,QAAQ,CAAC,WAAW;YACtC,mBAAmB,KAAK,GAAG,CAAC,mBAAmB,IAAI;QACrD;IACF;IAEA,mBAAmB,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,kBAAkB;IAE1D,6CAA6C;IAC7C,uBAAuB;IACvB,6CAA6C;IAC7C,IAAI,mBAAmB;IAEvB,IAAI,CAAC,OAAO;QACV,mBAAmB;IACrB,OAAO;QACL,MAAM,kBAAkB;YACtB;YACA;YACA;YACA;YACA;YACA;SACD;QAED,MAAM,oBAAoB,gBAAgB,IAAI,CAAC,CAAC,IAC9C,MAAM,WAAW,GAAG,QAAQ,CAAC;QAG/B,IAAI,mBAAmB,oBAAoB;QAC3C,IAAI,OAAO,oBAAoB;QAC/B,IAAI,MAAM,WAAW,GAAG,QAAQ,CAAC,SAAS,oBAAoB;QAE9D,mBAAmB,KAAK,GAAG,CAAC,kBAAkB;IAChD;IAEA,6CAA6C;IAC7C,kBAAkB;IAClB,6CAA6C;IAC7C,IAAI,eAAe;IAEnB,IAAI,UAAU,gBAAgB;IAC9B,IAAI,OAAO,gBAAgB;IAC3B,IAAI,SAAS,gBAAgB;IAE7B,yCAAyC;IACzC,IAAI,qBAAqB,QAAQ,CAAC,WAAW;QAC3C,gBAAgB;IAClB;IAEA,eAAe,KAAK,GAAG,CAAC,cAAc;IAEtC,6CAA6C;IAC7C,kBAAkB;IAClB,6CAA6C;IAC7C,MAAM,QAAQ,UAAU,MAAM;IAC9B,MAAM,WAAW,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,EAAE,QAAQ,MAAM;IACjE,MAAM,eAAe,UAAU,IAAI,KAAK,KAAK,KAAK,CAAC,AAAC,WAAW,QAAS;IAExE,6CAA6C;IAC7C,gBAAgB;IAChB,6CAA6C;IAC7C,MAAM,YAAsB,EAAE;IAE9B,IAAI,CAAC,aACH,UAAU,IAAI,CAAC;IACjB,IAAI,CAAC,UACH,UAAU,IAAI,CAAC;IACjB,IAAI,gBAAgB,QAAQ,CAAC,aAAa,CAAC,OACzC,UAAU,IAAI,CACZ;IAEJ,IAAI,SAAS,eAAe,IAC1B,UAAU,IAAI,CAAC;IAEjB,IAAI,UAAU,MAAM,KAAK,GAAG;QAC1B,UAAU,IAAI,CAAC;IACjB;IAEA,6CAA6C;IAC7C,mBAAmB;IACnB,6CAA6C;IAC7C,MAAM,UAAU,KAAK,KAAK,CACxB,mBAAmB,MACjB,mBAAmB,MACnB,eAAe,OACf,eAAe;IAGnB,6CAA6C;IAC7C,kBAAkB;IAClB,6CAA6C;IAC7C,IAAI,UAAU;IAEd,IAAI,WAAW,IAAI;QACjB,UACE;IACJ,OAAO,IAAI,WAAW,IAAI;QACxB,UACE;IACJ,OAAO,IAAI,WAAW,IAAI;QACxB,UACE;IACJ,OAAO;QACL,UACE;IACJ;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 1373, "column": 0}, "map": {"version":3,"sources":["file:///D:/claritycheck/claritycheck-frontend/app/products/%5Bid%5D/report/page.tsx"],"sourcesContent":["// src/app/products/[id]/report/page.tsx\n\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport Header from \"@/src/components/Header\";\nimport Footer from \"@/src/components/Footer\";\nimport ReportPreview from \"@/src/components/ReportPreview\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { getProduct, fetchLatestFollowups } from \"@/src/lib/api\";\nimport { Product, FollowupQuestion } from \"@/src/types\";\nimport { AlertCircle, Loader2, ArrowLeft } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport Link from \"next/link\";\n\nimport { analyzeProduct, type AnalysisResult } from \"@/src/lib/reportEngine\";\n\n// PDF libs\nimport { jsPDF } from \"jspdf\";\nimport * as htmlToImage from \"html-to-image\";\n\nexport default function ReportPage() {\n  const params = useParams();\n  const router = useRouter();\n  const productId = params.id as string;\n\n  const [loading, setLoading] = useState(true);\n  const [downloading, setDownloading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [product, setProduct] = useState<Product | null>(null);\n  const [questions, setQuestions] = useState<FollowupQuestion[]>([]);\n  const [analysis, setAnalysis] = useState<AnalysisResult | null>(null);\n\n  const reportRef = useRef<HTMLDivElement | null>(null);\n\n  // -----------------------------\n  // LOAD DATA\n  // -----------------------------\n  useEffect(() => {\n    loadData();\n  }, [productId]);\n\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const [productData, questionData] = await Promise.all([\n        getProduct(productId),\n        fetchLatestFollowups(productId),\n      ]);\n\n      setProduct(productData);\n\n      const list = Array.isArray(questionData)\n        ? questionData\n        : questionData.followups || [];\n\n      setQuestions(list);\n\n      // Run transparency analysis\n      const result = analyzeProduct(productData, list);\n      setAnalysis(result);\n    } catch (err: any) {\n      setError(err.message || \"Failed to load report data.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // -----------------------------\n  // PDF GENERATOR\n  // -----------------------------\n  const handleDownloadPDF = async () => {\n    if (!reportRef.current || !product) return;\n\n    setDownloading(true);\n\n    try {\n      const dataUrl = await htmlToImage.toPng(reportRef.current, {\n        pixelRatio: 2,\n        cacheBust: true,\n      });\n\n      const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\n\n      const props = pdf.getImageProperties(dataUrl);\n      const width = pdf.internal.pageSize.getWidth();\n      const height = (props.height * width) / props.width;\n\n      pdf.addImage(dataUrl, \"PNG\", 0, 0, width, height);\n      pdf.save(`${product.name}-clarity-report.pdf`);\n    } catch (err) {\n      console.error(\"PDF ERROR:\", err);\n      alert(\"Failed to generate PDF\");\n    } finally {\n      setDownloading(false);\n    }\n  };\n\n  const answeredCount = questions.filter(\n    (q) => q.answer && q.answer.trim() !== \"\"\n  ).length;\n\n  // -----------------------------\n  // LOADING SCREEN\n  // -----------------------------\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen flex-col\">\n        <Header />\n        <main className=\"flex-1 py-12\">\n          <div className=\"mx-auto max-w-2xl px-4\">\n            <Card className=\"h-96 animate-pulse bg-muted\" />\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  // -----------------------------\n  // MAIN UI\n  // -----------------------------\n  return (\n    <div className=\"flex min-h-screen flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-12\">\n        <div className=\"mx-auto max-w-2xl px-4 sm:px-6 lg:px-8\">\n          {/* BACK BUTTON */}\n          <motion.div className=\"mb-6\">\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => router.back()}>\n              <ArrowLeft className=\"h-4 w-4\" /> Back\n            </Button>\n          </motion.div>\n\n          {/* TITLE */}\n          <motion.div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold\">Transparency Report</h1>\n            <p className=\"text-lg text-muted-foreground mt-2\">\n              Your product transparency assessment is ready\n            </p>\n          </motion.div>\n\n          {/* ERROR BOX */}\n          {error && (\n            <div className=\"mb-6 flex gap-3 rounded-lg border border-red-500 bg-red-100 p-4\">\n              <AlertCircle className=\"h-5 w-5 text-red-600\" />\n              <div>\n                <p className=\"text-sm font-medium text-red-700\">{error}</p>\n                <Button size=\"sm\" variant=\"outline\" onClick={loadData}>\n                  <Loader2 className=\"h-3 w-3 animate-spin\" /> Retry\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* PDF CONTENT */}\n          <div ref={reportRef}>\n            {product && (\n              <ReportPreview\n                productName={product.name}\n                productClaim={product.claim}\n                category={product.category}\n                answeredQuestions={answeredCount}\n                totalQuestions={questions.length}\n                analysis={analysis || undefined}\n                onDownload={handleDownloadPDF}\n                loading={downloading}\n              />\n            )}\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}